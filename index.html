<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LZZGYHD65N"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LZZGYHD65N');
</script>
<meta charset="UTF-8">
<title>Hacker Guess Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  background:black;
  color:#00ff88;
  font-family:monospace;
  height:100vh;
  overflow:hidden;
}
canvas{
  position:fixed;
  inset:0;
  z-index:-1;
}
#panel{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:95%;
  max-width:420px;
  background:rgba(0,0,0,0.75);
  border:1px solid #00ff88;
  padding:20px;
  box-shadow:0 0 20px #00ff8855;
}
h1{text-align:center;margin:5px 0;}
.stat{text-align:center;opacity:.8;margin-bottom:6px;}
input{
  width:100%;
  padding:12px;
  background:black;
  border:1px solid #00ff88;
  color:#00ff88;
  font-size:18px;
}
#feedback{
  min-height:32px;
  margin-top:12px;
  text-align:center;
}
#leader{
  margin-top:12px;
  font-size:14px;
  opacity:.8;
  border-top:1px solid #00ff8855;
  padding-top:8px;
}
.glitch{
  animation:glitch .15s;
}
@keyframes glitch{
  0%{transform:translate(-50%,-50%)}
  50%{transform:translate(-49%,-51%)}
  100%{transform:translate(-50%,-50%)}
}
</style>
</head>

<body>
<canvas id="matrix"></canvas>

<div id="panel">
  <h1>ðŸ”¥ FIREWALL BREACH</h1>
  <div class="stat" id="level"></div>
  <div class="stat" id="timer"></div>
  <input id="input" type="number" placeholder="Enter IP Address">
  <div id="feedback"></div>
  <div id="leader"></div>
</div>

<script>
/* ===== GAME LOGIC ===== */
const input = document.getElementById("input");
const levelDiv = document.getElementById("level");
const timerDiv = document.getElementById("timer");
const feedback = document.getElementById("feedback");
const leader = document.getElementById("leader");
const panel = document.getElementById("panel");

let level = 1;
let range = 100;
let timeLimit = 30;
let target;
let timer;

/* leaderboard */
let best = Number(localStorage.getItem("bestLevel")||0);

function updateLeader(){
  leader.innerHTML = `ðŸ† Best Level: ${best}`;
}
updateLeader();

function startLevel(){
  target = Math.floor(Math.random()*range)+1;
  levelDiv.textContent = `LEVEL ${level} | RANGE 1â€“${range}`;
  feedback.textContent = "Establishing secure tunnel...";
  startTimer();
}

function startTimer(){
  clearInterval(timer);
  let t = timeLimit;
  timerDiv.textContent = `TIME ${t}s`;
  timer = setInterval(()=>{
    t--;
    timerDiv.textContent = `TIME ${t}s`;
    if(t<=0) fail();
  },1000);
}

function success(){
  clearInterval(timer);
  feedback.textContent = "âœ… ACCESS GRANTED";
  best = Math.max(best,level);
  localStorage.setItem("bestLevel",best);
  updateLeader();
  level++;
  range *= 10;
  timeLimit += 30;
  setTimeout(startLevel,1800);
}

function fail(){
  clearInterval(timer);
  feedback.textContent = "âŒ FIREWALL RESET";
  panel.classList.add("glitch");
  setTimeout(()=>panel.classList.remove("glitch"),150);
  setTimeout(startLevel,1800);
}

input.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    const v = Number(input.value);
    input.value="";
    if(!v) return;

    if(v===67) matrix67();

    if(v>target){
      feedback.textContent = `IP TOO HIGH â†’ ${v}`;
    }else if(v<target){
      feedback.textContent = `IP TOO LOW â†’ ${v}`;
    }else{
      success();
    }
  }
});

/* ===== MATRIX RAIN (REAL) ===== */
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

const fontSize = 16;
const columns = Math.floor(canvas.width / fontSize);
const drops = Array(columns).fill(0);

function drawMatrix(){
  ctx.fillStyle="rgba(0,0,0,0.08)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#00ff88";
  ctx.font=fontSize+"px monospace";

  for(let i=0;i<drops.length;i++){
    const text = Math.random()>0.5 ? "1":"0";
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize > canvas.height && Math.random()>0.975)
      drops[i]=0;
    drops[i]++;
  }
}
setInterval(drawMatrix,50);

function matrix67(){
  let start=Date.now();
  let flood=setInterval(()=>{
    ctx.fillStyle="rgba(0,0,0,0.15)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="#00ff88";
    for(let i=0;i<drops.length;i++){
      ctx.fillText("67",i*fontSize,drops[i]*fontSize);
      drops[i]++;
    }
    if(Date.now()-start>10000) clearInterval(flood);
  },30);
}

startLevel();
</script>
</body>
</html>
